---

export interface Tag {
  name: string;
  category: "cs" | "pm";
  details?: string;
}

export interface Props {
  title: string;
  link?: string;
  image: string;
  alt?: string;
  description: string;
  tags?: Tag[];
}

const { title, link, image, alt = title, description, tags = [] } = Astro.props;
---

<article class="flex flex-col mb-5">
  <div class="mt-4 mb-2">
    <div class="text-xl font-medium">
    {link ? (
    <a
      href={link}
      target="_blank"
      rel="noopener noreferrer"
      class="hover:bg-sky-200 transition-colors duration-300 inline-flex items-center underline decoration-sky-200"
    >
        <span set:html={title}></span>&nbsp;
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-arrow-up-right opacity-50"
        >
          <path d="M7 7h10v10"></path>
          <path d="M7 17 17 7"></path>
        </svg>
      </a>
        ) : (
    <span set:html={title}></span>
    )}
    </div>

{tags && tags.length > 0 && (
  <div class="flex flex-wrap gap-1 mt-2">
    {tags.map((tag) => {
      let colorClass = "";
      switch (tag.category) {
        case "cs":
          colorClass = "bg-blue-100 text-blue-800";
          break;
        case "pm":
          colorClass = "bg-green-100 text-green-800";
          break;
      }

      return (
        <span
          class={`relative group px-1.5 py-0.5 text-xs rounded-full font-medium inline-flex items-center gap-1 ${colorClass}`}
        >
          {tag.name}

          {tag.details && (
            <>
              <span class="cursor-pointer w-4 h-4 flex items-center justify-center rounded-full border border-gray-400 text-gray-500 text-[11px]">
                ?
              </span>
              <span
                class="absolute z-10 hidden group-hover:block bg-gray-800 text-white text-xs rounded-md px-2 py-1 left-1/2 -translate-x-1/2 top-full mt-1 whitespace-nowrap"
              
                set:html={tag.details}
                >
              </span>
            </>
          )}
        </span>
      );
    })}
  </div>
)}


<div class="w-full mt-3">
  <img src={image} alt={alt} class="rounded-md" />
  <p class="mt-2 text-base text-gray-600" set:html={description} />
</div>
</article>
